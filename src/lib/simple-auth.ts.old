// Sistema de auth SIMPLES - sem conflitos
const AUTH_STORAGE_KEY = 'marajoara_session'

export interface User {
  id: string
  email: string
  name: string
  role: 'admin' | 'partner' | 'user'
}

const USERS = {
  'admin@marajoara.com': {
    password: '123456',
    user: { id: '1', email: 'admin@marajoara.com', name: 'Admin', role: 'admin' as const }
  },
  'parceiro@pizza.com': {
    password: '123456',
    user: { id: '2', email: 'parceiro@pizza.com', name: 'Parceiro Pizza', role: 'partner' as const }
  },
  'usuario@email.com': {
    password: '123456',
    user: { id: '3', email: 'usuario@email.com', name: 'JoÃ£o Silva', role: 'user' as const }
  }
}

export const simpleAuth = {
  login: (email: string, password: string): User | null => {
    const account = USERS[email as keyof typeof USERS]
    if (account && account.password === password) {
      localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(account.user))
      return account.user
    }
    return null
  },
  
  logout: () => {
    localStorage.removeItem(AUTH_STORAGE_KEY)
  },
  
  getUser: (): User | null => {
    if (typeof window === 'undefined') return null
    const data = localStorage.getItem(AUTH_STORAGE_KEY)
    return data ? JSON.parse(data) : null
  }
}
